(function(){"use strict";var t={8322:function(t,e,o){var i=o(9242),s=o(3396);function n(t,e,o,i,n,r){const a=(0,s.up)("MainCanvas");return(0,s.wg)(),(0,s.j4)(a)}const r={class:"main"},a={key:0},h={id:"mainCanvas",ref:"canvas"};function c(t,e,o,i,n,c){const p=(0,s.up)("InputArea"),l=(0,s.up)("ButtonDisplay");return(0,s.wg)(),(0,s.iD)("div",r,[n.physicsFlg?((0,s.wg)(),(0,s.iD)("p",a,"物理適応中")):(0,s.kq)("",!0),(0,s._)("canvas",h,null,512),(0,s.Wm)(p,{onInputForm:e[0]||(e[0]=t=>c.inputForm(t)),onPhysicsAction:c.physicsAction,objectList:n.objectList},null,8,["onPhysicsAction","objectList"]),(0,s.Wm)(l,{objectList:n.objectList,onSelectBox:e[1]||(e[1]=t=>c.selectBox(t))},null,8,["objectList"])])}o(7658);var p=o(1114),l=o(4543),u=o(5294),b=o(7139);const m=t=>((0,s.dD)("data-v-18e12f44"),t=t(),(0,s.Cn)(),t),d={class:"main"},y={class:"err-message",id:"err-message"},x={class:"name"},g=m((()=>(0,s._)("label",null,"name",-1))),w={class:"size"},f=m((()=>(0,s._)("label",null,"size",-1))),v={class:"position"},j=m((()=>(0,s._)("label",null,"position",-1))),z={class:"weight"},O=m((()=>(0,s._)("label",null,"weight",-1))),_={class:"button"},B=m((()=>(0,s._)("canvas",{id:"subCanvas"},null,-1)));function C(t,e,o,n,r,a){return(0,s.wg)(),(0,s.iD)("div",d,[(0,s._)("p",y,(0,b.zw)(r.errMessage),1),(0,s._)("div",x,[g,(0,s.wy)((0,s._)("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=t=>r.name=t),ref:"name"},null,512),[[i.nr,r.name]])]),(0,s._)("div",w,[f,(0,s.wy)((0,s._)("input",{type:"number",id:"size-x",placeholder:"縦 cm","onUpdate:modelValue":e[1]||(e[1]=t=>r.sizeX=t),ref:"size-x"},null,512),[[i.nr,r.sizeX]]),(0,s.wy)((0,s._)("input",{type:"number",id:"size-y",placeholder:"横 cm","onUpdate:modelValue":e[2]||(e[2]=t=>r.sizeY=t),ref:"size-y"},null,512),[[i.nr,r.sizeY]]),(0,s.wy)((0,s._)("input",{type:"number",id:"size-z",placeholder:"高 cm","onUpdate:modelValue":e[3]||(e[3]=t=>r.sizeZ=t),ref:"size-z"},null,512),[[i.nr,r.sizeZ]])]),(0,s._)("div",v,[j,(0,s.wy)((0,s._)("input",{type:"number",id:"position-x",placeholder:"x","onUpdate:modelValue":e[4]||(e[4]=t=>r.positionX=t)},null,512),[[i.nr,r.positionX]]),(0,s.wy)((0,s._)("input",{type:"number",id:"position-y",placeholder:"y","onUpdate:modelValue":e[5]||(e[5]=t=>r.positionY=t)},null,512),[[i.nr,r.positionY]]),(0,s.wy)((0,s._)("input",{type:"number",id:"position-z",placeholder:"z","onUpdate:modelValue":e[6]||(e[6]=t=>r.positionZ=t)},null,512),[[i.nr,r.positionZ]])]),(0,s._)("div",z,[O,(0,s.wy)((0,s._)("input",{type:"number",id:"weight",placeholder:"kg","onUpdate:modelValue":e[7]||(e[7]=t=>r.weight=t)},null,512),[[i.nr,r.weight]])]),(0,s._)("div",_,[(0,s._)("button",{onClick:e[8]||(e[8]=t=>a.defaultInput())},"defaultInput"),(0,s._)("button",{onClick:e[9]||(e[9]=t=>a.create())},"create"),(0,s._)("button",{onClick:e[10]||(e[10]=e=>t.update())},"update"),(0,s._)("button",{onClick:e[11]||(e[11]=e=>t.deleteObject())},"delete"),(0,s._)("button",{onClick:e[12]||(e[12]=t=>a.physics()),ref:"physics"},"Physics",512),(0,s._)("button",{onClick:e[13]||(e[13]=t=>a.clear())},"clear")]),B])}var k={name:"InputArea",props:{objectList:Array},data(){return{name:"",sizeX:"",sizeY:"",sizeZ:"",positionX:"",positionY:"",positionZ:"",weight:"",errMessage:""}},mounted(){},methods:{clear(){this.name="",this.sizeX="",this.sizeY="",this.sizeZ="",this.positionX="",this.positionY="",this.positionZ="",this.weight=""},defaultInput(){this.sizeX=50,this.sizeY=50,this.sizeZ=50,this.positionX=10,this.positionY=50,this.positionZ=10,this.weight=50},create(){if(!this.checkInputBasic())return;if(!this.checkDuplicateGeneration())return;const t={name:this.name,sizeX:this.sizeX,sizeY:this.sizeY,sizeZ:this.sizeZ,positionX:this.positionX,positionY:this.positionY,positionZ:this.positionZ,weight:this.weight};this.$emit("input-form",t)},checkInputBasic(){return this.errMessage="",""!=this.name||(this.errMessage="nameが空です",this.$refs.name.focus(),this.$refs.name.style.backgroundColor="#FFCCFF",!1)},checkDuplicateGeneration(){for(let t in this.objectList)if(this.objectList[t]==this.name)return this.errMessage="すでに生成されています",this.$refs.name.focus(),this.$refs.name.style.backgroundColor="#FFCCFF",!1;return!0},physics(){this.$refs.physics.blur(),this.$emit("physics-action")}}},L=o(89);const F=(0,L.Z)(k,[["render",C],["__scopeId","data-v-18e12f44"]]);var Z=F;const A={class:"main"},Y=["onClick"];function D(t,e,o,i,n,r){return(0,s.wg)(),(0,s.iD)("div",A,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.objectList,(t=>((0,s.wg)(),(0,s.iD)("span",{key:t.id},[(0,s._)("button",{onClick:e=>r.selectBox(t)},(0,b.zw)(t),9,Y)])))),128))])}var M={name:"ButtonDisplay",props:{objectList:Array},data(){return{name:""}},mounted(){},methods:{selectBox(t){this.$emit("select-box",t)}}};const X=(0,L.Z)(M,[["render",D],["__scopeId","data-v-2b946544"]]);var I=X;function P(t){console.log(t)}function q(t){console.table(t)}function N(t){return""!=t&&!(Number(t)<=0)}function $(t,e){return Math.floor(Math.random()*(e+1-t))+t}var T={print:P,printT:q,isInteger:N,getRandom:$};class U{constructor(t,e){this.objectList=new Array,this.scene=t,this.world=e}createBoxObject(t,e,o,i){const s=new V(t,e,o,i);this.objectList.push(s),this.scene.add(s.box),this.world.addBody(s.boxBody)}getObject(t){for(const e of this.objectList)if(e.name==t)return e;return null}move(t,e,o){const i=this.getObject(o);console.log(i),null!=i?i.move(t,e,this.objectList):console.log("nullだよ")}}class V{constructor(t,e,o,i){this.name=t,this.geometry="",this.material="",this.box="",this.boxBody="",this.createBoxObject(e,o),this.addBoxPhysics(i)}createBoxObject(t,e){this.geometry=new p.DvJ(t.x,t.y,t.z);const o="0xac76"+String(T.getRandom(50,70));this.material=new p.YBo({color:Number(o),transparent:!0}),this.box=new p.Kj0(this.geometry,this.material),this.box.position.set(e.x,e.y,e.z)}addBoxPhysics(t){const e=new u.AO(this.box.geometry.parameters.width/2,this.box.geometry.parameters.height/2,this.box.geometry.parameters.depth/2),o=new u.xu(e);this.boxBody=new u.uT({mass:t,shape:o}),this.boxBody.position.set(this.box.position.x,this.box.position.y,this.box.position.z)}setObjectToPhysics(){this.box.position.copy(this.boxBody.position),this.box.quaternion.copy(this.boxBody.quaternion)}setPhysicsToObject(){this.boxBody.position=this.box.position,this.boxBody.quaternion=this.box.quaternion}copy(){}move(t,e,o){this.canMove(t,e,o)&&("x"==t&&(this.box.position.x+=e),"y"==t&&(this.box.position.y-this.box.geometry.parameters.height/2>0||e>0)&&(this.box.position.y+=e),"z"==t&&(this.box.position.z+=e),console.log("動いていいよ"))}canMove(t,e,o){let i=!0,s=!0,n=!0,r="",a="",h="",c="",p="",l="",u="",b="",m="",d="",y="",x="",g="";"x"==t?(r=this.box.position.x+e,a=r-this.box.geometry.parameters.width/2,h=r+this.box.geometry.parameters.width/2,c=this.box.position.y-this.box.geometry.parameters.height/2,p=this.box.position.y+this.box.geometry.parameters.height/2,l=this.box.position.z-this.box.geometry.parameters.depth/2,u=this.box.position.z+this.box.geometry.parameters.depth/2):"y"==t?(r=this.box.position.y+e,a=this.box.position.x-this.box.geometry.parameters.width/2,h=this.box.position.x+this.box.geometry.parameters.width/2,c=r-this.box.geometry.parameters.height/2,p=r+this.box.geometry.parameters.height/2,l=this.box.position.z-this.box.geometry.parameters.depth/2,u=this.box.position.z+this.box.geometry.parameters.depth/2):"z"==t&&(r=this.box.position.z+e,a=this.box.position.x-this.box.geometry.parameters.width/2,h=this.box.position.x+this.box.geometry.parameters.width/2,c=this.box.position.y-this.box.geometry.parameters.height/2,p=this.box.position.y+this.box.geometry.parameters.height/2,l=r-this.box.geometry.parameters.depth/2,u=r+this.box.geometry.parameters.depth/2);for(const w of o)w.name!=this.name&&(b=w.box.position.x-w.box.geometry.parameters.width/2,m=w.box.position.x+w.box.geometry.parameters.width/2,d=w.box.position.y-w.box.geometry.parameters.height/2,y=w.box.position.y+w.box.geometry.parameters.height/2,x=w.box.position.z-w.box.geometry.parameters.depth/2,g=w.box.position.z+w.box.geometry.parameters.height/2,console.table({B_x1:b,B_x2:m,B_y1:d,B_y2:y,B_z1:x,B_z2:g}),(a<=b&&b<h&&h<=m||b<=a&&a<m&&m<=h||a<=b&&m<=h||b<=a&&h<=m)&&(c<=d&&d<p&&p<=y||d<=c&&c<y&&y<=p||c<=d&&y<=p||d<=c&&p<=y)&&(i=!1),(a<=b&&b<h&&h<=m||b<=a&&a<m&&m<=h||a<=b&&m<=h||b<=a&&h<=m)&&(l<=x&&x<u&&u<=g||x<=l&&l<g&&g<=u||l<=x&&g<=u||x<=l&&u<=g)&&(n=!1),(c<=d&&d<p&&p<=y||d<=c&&c<y&&y<=p||c<=d&&y<=p||d<=c&&p<=y)&&(l<=x&&x<u&&u<=g||x<=l&&l<g&&g<=u||l<=x&&g<=u||x<=l&&u<=g)&&(s=!1));return!!(i||s||n)}}var S={BoxObjectController:U},E={name:"MainCanvas",components:{InputArea:Z,ButtonDisplay:I},data(){return{width:860,height:560,physicsFlg:!1,workObjectName:"",objectList:[]}},mounted(){this.initMainCanvas(),document.addEventListener("keydown",this.onKeyDown)},methods:{initMainCanvas(){this.canvasElement=document.querySelector("#mainCanvas"),this.renderer=new p.CP7({canvas:this.canvasElement}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),this.world=new u.q3({gravity:new u.AO(0,-50,0)}),this.scene=new p.xsS,this.camera=new p.cPb(45,this.width/this.height),this.camera.position.set(200,50,200),this.controls=new l.z(this.camera,this.canvasElement),this.controls.update();const t=new p.VLJ(600);this.scene.add(t);const e=new p.y8_(300);this.scene.add(e);const o=new p.Mig(16777215,1);this.scene.add(o);const i=new p.Ox3(16777215,1);i.position.set(5,10,1),this.scene.add(i);const s=new u.uT({type:u.uT.STATIC,shape:new u.JO});s.position.set(0,0,0),s.quaternion.setFromEuler(-Math.PI/2,0,0),this.world.addBody(s),this.geometry=new p.DvJ(200,3,200),this.material=new p.Wid({color:5858926,roughness:.2}),this.stage=new p.Kj0(this.geometry,this.material),this.stage.position.set(0,-1.5,0),this.scene.add(this.stage),this.boxObjectController=new S.BoxObjectController(this.scene,this.world),this.mainLoop()},mainLoop(){if(this.renderer.render(this.scene,this.camera),this.physicsFlg)for(const t of this.boxObjectController.objectList)t.box.position.copy(t.boxBody.position),t.box.quaternion.copy(t.boxBody.quaternion);this.world.fixedStep(),requestAnimationFrame(this.mainLoop)},inputForm(t){this.boxObjectController.createBoxObject(t.name,{x:t.sizeX,y:t.sizeY,z:t.sizeZ},{x:t.positionX,y:t.positionY,z:t.positionZ},t.weight),this.workObjectName=t.name,console.log(this.workObjectName),this.objectList.push(t.name),this.$refs.canvas.focus()},selectBox(t){this.workObjectName=t,console.log(t),this.$refs.canvas.focus()},physicsAction(){for(const t of this.boxObjectController.objectList)t.boxBody.position.copy(t.box.position),t.boxBody.quaternion.copy(t.box.quaternion);this.physicsFlg?this.physicsFlg=!1:this.physicsFlg=!0,this.$refs.canvas.focus()},onKeyDown(t){"ArrowLeft"==t.code&&(console.log("左"),this.boxObjectController.move("x",-1,this.workObjectName)),"ArrowRight"==t.code&&(console.log("右"),this.boxObjectController.move("x",1,this.workObjectName)),"ArrowUp"==t.code&&(console.log("上"),this.boxObjectController.move("y",1,this.workObjectName)),"ArrowDown"==t.code&&(console.log("下"),this.boxObjectController.move("y",-1,this.workObjectName)),"Space"==t.code&&(console.log("スペース"),this.boxObjectController.move("z",-1,this.workObjectName)),"KeyB"==t.code&&(console.log("Bキー"),this.boxObjectController.move("z",1,this.workObjectName))}}};const K=(0,L.Z)(E,[["render",c]]);var R=K,J={name:"App",components:{MainCanvas:R}};const W=(0,L.Z)(J,[["render",n]]);var G=W;const H=(0,i.ri)(G);H.mount("#app")}},e={};function o(i){var s=e[i];if(void 0!==s)return s.exports;var n=e[i]={exports:{}};return t[i](n,n.exports,o),n.exports}o.m=t,function(){var t=[];o.O=function(e,i,s,n){if(!i){var r=1/0;for(p=0;p<t.length;p++){i=t[p][0],s=t[p][1],n=t[p][2];for(var a=!0,h=0;h<i.length;h++)(!1&n||r>=n)&&Object.keys(o.O).every((function(t){return o.O[t](i[h])}))?i.splice(h--,1):(a=!1,n<r&&(r=n));if(a){t.splice(p--,1);var c=s();void 0!==c&&(e=c)}}return e}n=n||0;for(var p=t.length;p>0&&t[p-1][2]>n;p--)t[p]=t[p-1];t[p]=[i,s,n]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};o.O.j=function(e){return 0===t[e]};var e=function(e,i){var s,n,r=i[0],a=i[1],h=i[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(s in a)o.o(a,s)&&(o.m[s]=a[s]);if(h)var p=h(o)}for(e&&e(i);c<r.length;c++)n=r[c],o.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return o.O(p)},i=self["webpackChunkthreejs_project"]=self["webpackChunkthreejs_project"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=o.O(void 0,[998],(function(){return o(8322)}));i=o.O(i)})();
//# sourceMappingURL=app.715b4f77.js.map